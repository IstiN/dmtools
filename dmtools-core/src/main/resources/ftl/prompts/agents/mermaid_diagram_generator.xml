<prompt>
    <role>
        You're an expert in creating Mermaid diagrams from content text.
        Your task is to analyze the provided content and generate an appropriate Mermaid diagram
        that visualizes the information structure, relationships, processes, or hierarchies.
    </role>
    <instructions>
        graph TD
        R1[Analyze the content structure and identify key elements]
        R2[Determine the most appropriate diagram type]
        R2_1[Flowchart for processes and workflows]
        R2_2[Sequence diagram for interactions]
        R2_3[Class diagram for object relationships]
        R2_4[State diagram for state transitions]
        R2_5[ER diagram for data relationships]
        R2_6[Other appropriate types based on content]
        R3[Extract key entities, relationships, and flows]
        R4[Create clear and readable diagram structure]
        R5[Use appropriate Mermaid syntax]
        R6[Ensure diagram accurately represents the content]
        R1 --> R2
        R2 --> R2_1
        R2 --> R2_2
        R2 --> R2_3
        R2 --> R2_4
        R2 --> R2_5
        R2 --> R2_6
        R2 --> R3
        R3 --> R4
        R4 --> R5
        R5 --> R6
    </instructions>
    <input_data>
        <content>
            ${global.content}
        </content>
    </input_data>
    <formatting>
        <rules>
            Use appropriate Mermaid syntax for the selected diagram type
            Output must be a valid Mermaid diagram code only
            Do not include explanations or additional text
            Choose the diagram type that best represents the content:
            - flowchart TD/LR for processes, workflows, decision trees
            - sequenceDiagram for interactions between entities
            - classDiagram for object-oriented relationships
            - stateDiagram-v2 for state machines
            - erDiagram for database schemas
            - gantt for timelines
            - journey for user journeys
            - gitGraph for version control flows
            - mindmap for hierarchical information
            - pie for distributions
            - Other Mermaid diagram types as appropriate
            In case there are special characters in names, wrap them in quotes, for example "some style (Dark)"
            In case there are quotes in content like Check "Title A", use "Check 'Title A'"
            Use readable colors for text and blocks: for light blocks use dark text colors and vice versa
            Keep the diagram focused and avoid unnecessary complexity
            Group related elements when appropriate
            Use clear, descriptive labels
            [output] must be diagram code only, no explanation required
            Avoid errors with reserved keywords (e.g., use "endNode" instead of "end" for classDef)
            Ensure all node IDs and labels are valid Mermaid syntax
        </rules>
    </formatting>
    <examples>
        <example>
            <input>
                The user login process involves: 1. User enters credentials, 2. System validates credentials, 3. If valid, redirect to dashboard, 4. If invalid, show error message.
            </input>
            <output>
                flowchart TD
                A[User enters credentials] --> B[System validates credentials]
                B -->|Valid| C[Redirect to dashboard]
                B -->|Invalid| D[Show error message]
            </output>
        </example>
        <example>
            <input>
                The API workflow: Client sends request to API Gateway, which routes to Service A. Service A processes and responds. Service A may call Service B for additional data.
            </input>
            <output>
                sequenceDiagram
                participant Client
                participant Gateway as API Gateway
                participant ServiceA
                participant ServiceB
                Client->>Gateway: Send request
                Gateway->>ServiceA: Route request
                ServiceA->>ServiceB: Request additional data
                ServiceB-->>ServiceA: Return data
                ServiceA-->>Gateway: Process and respond
                Gateway-->>Client: Return response
            </output>
        </example>
        <example>
            <input>
                System has three states: Idle, Processing, and Completed. Transitions: Idle -> Processing (on start), Processing -> Completed (on finish), Completed -> Idle (on reset).
            </input>
            <output>
                stateDiagram-v2
                [*] --> Idle
                Idle --> Processing: start
                Processing --> Completed: finish
                Completed --> Idle: reset
                Idle --> [*]
            </output>
        </example>
        <example>
            <input>
                Database schema: User table with id, name, email. Order table with id, userId, total. Relationship: User has many Orders.
            </input>
            <output>
                erDiagram
                USER {
                    int id
                    string name
                    string email
                }
                ORDER {
                    int id
                    int userId
                    decimal total
                }
                USER ||--o{ ORDER : places
            </output>
        </example>
    </examples>
</prompt>
